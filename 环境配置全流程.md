我现在新创建了一台并行智算云4卡实例。需要按照我的要求来逐步配置环境，来运行qwen2.5vl-7b和deepeyes的推理与微调。要求如下：1、创建conda虚拟环境，命名为deepeyes，并完成conda init  2、我将本地transformers.zip上传后，为我完成可编译的安装。 3、我无法连接github等外国网站，使用清华源安装可用的torch 4、从modelscope下载deepeyes的参数，但不必下载qwen的



### 创建conda环境

```shell
nvidia-smi
conda create -n deepeyes python=3.10 -y
conda init bash
source ~/.bashrc
conda activate deepeyes
```

### 安装transformers

```
pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple
```

```shell
上传transformers代码
cd ~/pkgs
unzip transformers-4.57.1.zip   # 文件名按你实际的来
cd transformers-4.57.1          # 或解压出来的目录名
pip install -e . --no-build-isolation  #开发模式
python -c "import transformers; print(transformers.__version__)"
```

### 安装torch

```
pip install torch torchvision torchaudio --extra-index-url https://download.pytorch.org/whl/cu124 -i https://pypi.tuna.tsinghua.edu.cn/simple
或者
pip install torch torchvision torchaudio \
  --extra-index-url https://download.pytorch.org/whl/cu124 \
  -i https://mirrors.aliyun.com/pypi/simple
https://pypi.doubanio.com/simple

#验证
python - << 'EOF'
import torch
print("torch version:", torch.__version__)
print("cuda is available:", torch.cuda.is_available())
if torch.cuda.is_available():
    print("device count:", torch.cuda.device_count())
    print("device 0:", torch.cuda.get_device_name(0))
    x = torch.rand(1024, 1024, device="cuda")
    y = torch.mm(x, x)
    print("test mm ok, y[0,0] =", y[0,0].item())
EOF

```

### 下载deepeyes参数和数据

```
pip install -U modelscope -i https://pypi.tuna.tsinghua.edu.cn/simple
```

```
from modelscope.hub.snapshot_download import snapshot_download

model_id = "Lixiang/ChenShawn-DeepEyes-7B"
local_dir = "/root/local-nvme/models"  # 你也可以换成更大的盘
path = snapshot_download(model_id, cache_dir=local_dir)
print("Downloaded to:", path)
```

### 本地上传代码和数据

```
自己写的loop和tools脚本
vlms have tunnel vision数据

```

